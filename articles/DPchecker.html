<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>DPchecker • DPchecker</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DPchecker">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DPchecker</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/DPchecker.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>DPchecker</h1>
            
      

      <div class="d-none name"><code>DPchecker.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="install-dp-checker">Install DP checker<a class="anchor" aria-label="anchor" href="#install-dp-checker"></a>
</h2>
<p>You can install <a href="https://nationalparkservice.github.io/DPchecker/" class="external-link">DPchecker</a> as
part of the <a href="https://nationalparkservice.github.io/NPSdataverse/" class="external-link">NPSdataverse</a>
using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"nationalparkservice/NPSdataverse"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">NPSdataverse</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-a-data-package">Check a data package<a class="anchor" aria-label="anchor" href="#check-a-data-package"></a>
</h2>
<div class="section level3">
<h3 id="the-entire-package">The entire package<a class="anchor" aria-label="anchor" href="#the-entire-package"></a>
</h3>
<p>The most common use case for DPchecker is to run a single function,
<code><a href="../reference/run_congruence_checks.html">run_congruence_checks()</a></code> that will run all of the DPchecker
tests at once. To do this you will need your fully constructed data
package in a single folder consisting of: * EML-formatted metadata with
a file a name that ends in _metadata.xml * UTF-8 encoded .csv files You
will also need to supply the path to your data package. If you are using
Rstudio and have started a new project, you can put the data package
folder in your Rproject folder and tell R where to find it:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_congruence_checks.html">run_congruence_checks</a></span><span class="op">(</span><span class="st">"my_data_package_folder"</span><span class="op">)</span></span></code></pre></div>
<p>If your data package is somewhere else on your hard drive, you will
have to describe the path to the data package folder. In this example,
the data package folder is a folder called “nps_data” located in the
Downloads folder (and “username” would be your username):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dp</span><span class="op">&lt;-</span><span class="st">"C:/Users/username/Downloads/my_data_package_folder"</span></span>
<span><span class="fu"><a href="../reference/run_congruence_checks.html">run_congruence_checks</a></span><span class="op">(</span><span class="va">dp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="metadata-only">Metadata only<a class="anchor" aria-label="anchor" href="#metadata-only"></a>
</h3>
<p>In some cases, you may want to check just the EML metadata file for
completeness without checking whether it properly coincides with the
data files (perhaps you are trouble shooting a metadata issue or were
sent just the metadata file to check). In that case, you can restrict
the <code><a href="../reference/run_congruence_checks.html">run_congruence_checks()</a></code> function to just check metadata
elements:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># In this case "my_data_package_folder" need only contain the metadata file but could include .csvs</span></span>
<span><span class="va">dp</span><span class="op">&lt;-</span><span class="st">"C:/Users/username/Downloads/my_data_package_folder"</span></span>
<span><span class="fu"><a href="../reference/run_congruence_checks.html">run_congruence_checks</a></span><span class="op">(</span><span class="va">dp</span>, check_metadata_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="generate-a-log-file">Generate a log file<a class="anchor" aria-label="anchor" href="#generate-a-log-file"></a>
</h3>
<p>If you want to generate a log file of the
<code><a href="../reference/run_congruence_checks.html">run_congruence_checks()</a></code> results you can do so. The log file
may be useful for collaborating on trouble shooting or may simply be
handy for your records. <strong>Log files should not be included in the
data package upload</strong>. The log file will be written to the
directory of your Rproject by default, but you can also specify the
directory it should be saved to.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save log file to current working directory:</span></span>
<span><span class="fu"><a href="../reference/run_congruence_checks.html">run_congruence_checks</a></span><span class="op">(</span><span class="va">dp</span>, output_filename <span class="op">=</span> <span class="st">"congruence_log_YYYY-MM-DD"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># save the log file to another directory:</span></span>
<span><span class="va">save_here</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/username/Documents"</span></span>
<span><span class="fu"><a href="../reference/run_congruence_checks.html">run_congruence_checks</a></span><span class="op">(</span><span class="va">dp</span>, output_filename <span class="op">=</span> <span class="st">"congruence_log_YYYY-MM-DD"</span>, output_dir <span class="op">=</span> <span class="va">save_here</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="interpreting-results">Interpreting results<a class="anchor" aria-label="anchor" href="#interpreting-results"></a>
</h2>
<p>DPchecker tests are designed to help data package creators produce
high quality, complete data packages that can fully leverage DataStore’s
ability to ingest machine-readable metadata, and be maximally useful to
downstream data users. The same set of tests will also be useful for
data package reviewers.</p>
<p>Passing a test is indicated with a green check mark (<span style="color: green;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>✓</mi><annotation encoding="application/x-tex">\checkmark</annotation></semantics></math></span>).
When a test fails, it may fail with an error (a red <span style="color: red;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>×</mo><annotation encoding="application/x-tex">\times</annotation></semantics></math></span>)
or a warning (a yellow exclamation mark, <span style="color: yellow;">!</span>).</p>
<p>Errors must be addressed prior to upload. <strong>Please modify your
data package so that DPchecker does not return any errors.</strong></p>
<p>Warnings are helpful indications that the data package creator may
want to look into something. It may not be wrong, but it might be
unusual. For instance, if a data package lacked taxonomic or geographic
coverage it would fail the taxonomic or geographic coverage test with a
warning because while lacking taxonomy or geography is unusual, it may
not be incorrect. Warnings may also be used to alert data package
creators of best practices - for instance if an abstract is less than 20
words long the test will produce a warning suggesting the data package
creator consider writing a more informative abstract.</p>
</div>
<div class="section level2">
<h2 id="tests-conducted">Tests conducted<a class="anchor" aria-label="anchor" href="#tests-conducted"></a>
</h2>
<p>DPchecker v0.3.2 and above runs two types of tests: metadata only
tests and tests to determine whether the metadata and data files are
congruent. Metadata tests can be broken down in to two sub-categories,
metadata compliance and metadata completeness. The tests run and the
order in which they are run are listed below.</p>
<div class="section level3">
<h3 id="metadata-compliance">Metadata compliance<a class="anchor" aria-label="anchor" href="#metadata-compliance"></a>
</h3>
<p>These tests determine whether the metadata is schema valid and
adheres to some rules for data packages. They only require the
*_metadata.xml file to run and do not require that the data files be
present. These include:</p>
<ul>
<li>The metadata file is schema valid (<a href="../reference/test_validate_schema.html"><code>test_validate_schema()</code></a>)</li>
<li>Each filename is used exactly once in the metadata (<a href="../reference/test_dup_meta_entries.html"><code>test_dup_meta_entries()</code></a>)</li>
<li>The version of EML is supported (<a href="../reference/test_metadata_version.html"><code>test_metadata_version()</code></a>
</li>
<li>Metadata indicates that Each data file has a single-character field
delimiter (<a href="../reference/test_delimiter.html"><code>test_delimiter()</code></a>)</li>
<li>Metadata indicates that each data file contains exactly one header
row (<a href="../reference/test_header_num.html"><code>test_header_num()</code></a>)</li>
<li>Metadata indicates that data files do not have footers (<a href="../reference/test_footer.html"><code>test_footer()</code></a>)</li>
<li>Metadata contains taxonomic coverage element (<a href="../reference/test_taxonomic_cov.html"><code>test_taxonomic_cov()</code></a>)</li>
<li>Metadata contains geographic coverage element (<a href="../reference/test_geographic_cov.html"><code>test_geographic_cov()</code></a>)</li>
<li>Metadata contain NPS content unit links (<a href="../reference/test_content_units.html">test_content_units()</a>)</li>
<li>Metadata contains a Digital Object Identifier (DOI) (<a href="../reference/test_doi.html"><code>test_doi()</code></a>)</li>
<li>Metadata DOI is properly formatted (<a href="../reference/test_doi_format.html"><code>test_doi_format()</code></a>)</li>
<li>Metadata contains URLs for each data table (<a href="../reference/test_datatable_urls.html">test_datatable_urls</a>)</li>
<li>Metadata URLs are properly formatted and correspond to the DOI
indicated in the metadata (<a href="../reference/test_datatable_urls_doi">test_datatable_urls_doi</a>)</li>
<li>Metadata contains a publisher element (<a href="../reference/test_publisher.html"><code>test_publisher()</code></a>)</li>
<li>Metadata indicates data column names begin with a letter and do not
contain spaces or special characters (<a href="../reference/test_valid_fieldnames.html"><code>test_valid_fieldnames()</code></a>)</li>
<li>Metadata indicates that file names being with a letter and do not
contain special characters or spaces. (<a href="../reference/test_valid_filenames.html"><code>test_valid_filenames()</code></a>)</li>
<li>Metadata contains emails, but only .gov emails (<a href="../reference/test_pii_meta_emails.html"><code>test_pii_meta_emails()</code></a>)</li>
</ul>
</div>
<div class="section level3">
<h3 id="eml-elements-required-for-datastore">EML elements required for DataStore:<a class="anchor" aria-label="anchor" href="#eml-elements-required-for-datastore"></a>
</h3>
<p>These tests ensure that the EML elements necessary for DataStore to
properly extract metadata and populate a reference exist, are in the
correct location, and are properly formatted. These elements are also
often the aspects of metadata that will be passed on to other
repositories and search engines such as <a href="https://datacite.org/" class="external-link">DataCite</a> <a href="https://data.gov/" class="external-link">data.gov</a> and <a href="https://datasetsearch.research.google.com/" class="external-link">google’s dataset
search</a>. Therefore, these checks may throw warnings with suggestions
on best practices - such as removing stray characters from abstracts or
suggesting a more informative title if your title is unusually short.
Required EML element tests only require the *_metadata.xml file to run
and do not require that the data files be present.</p>
<ul>
<li>Creator element exists and if individual creators exist, they all
have valid (&lt;3 words) surNames (<a href="../reference/test_creator.html"><code>test_creator()</code></a>)</li>
<li>Publication date is present and in the correct ISO-8601 format (<a href="../reference/test_pub_date.html"><code>test_pub_date()</code></a>)</li>
<li>Data package title is present in metadata (<a href="../reference/test_dp_title.html"><code>test_dp_title()</code></a>)</li>
<li>Data package metadata contains at least one keyword (<a href="../reference/test_keywords.html"><code>test_keywords()</code></a>)</li>
<li>Metadata states data was created by or for NPS (<a href="../reference/test_by_for_nps.html"><code>test_by_for_nps()</code></a>)</li>
<li>Metadata indicates the publisher is the National Park Service (<a href="../reference/test_publisher_name.html"><code>test_publisher_name()</code></a>)</li>
<li>Metadata indicates the publisher state is CO (<a href="../reference/test_publisher_state.html"><code>test_publisher_state()</code></a>)</li>
<li>Metadata indicates the publisher city is Fort Collins (<a href="../reference/test_publisher_city.html"><code>test_publisher_city()</code></a>)</li>
<li>Metadata contains a well formatted abstract for the data package (<a href="../reference/test_dp_abstract.html"><code>test_dp_abstract()</code></a>)</li>
<li>Metadata contains a well formatted methods section for the data
package (<a href="../reference/test_methods.html"><code>test_methods()</code></a>)</li>
<li>All dataTables listed in metadata have a unique file description (<a href="../reference/test_file_descript.html"><code>test_file_descript()</code></a>)</li>
<li>Metadata contains a valid CUI code (<a href="../reference/test_cui_dissemination.html"><code>test_cui_dissemination()</code></a>)</li>
<li>Metadata contains a valid license name (<a href="../reference/test_license.html"><code>test_license()</code></a>)</li>
<li>Metadata contains an Intellectual Rights statement (<a href="../reference/test_int_rights.html"><code>test_int_rights()</code></a>
</li>
<li>All attributes listed in metadata have attribute definitions (<a href="../reference/test_attribute_defs.html"><code>test_attribute_defs()</code></a>)</li>
<li>All attributes listed in metadata have storage types associated with
them (<a href="../reference/test_storage_type.html"><code>test_storage_type()</code></a>)</li>
<li>All attribute storage types are valid values (<a href="../reference/test_storage_type.html"><code>test_storage_type()</code></a>)</li>
</ul>
</div>
<div class="section level3">
<h3 id="recommended-eml-elements">Recommended EML elements<a class="anchor" aria-label="anchor" href="#recommended-eml-elements"></a>
</h3>
<p>These elements aren’t required. If they are missing, the tests will
generate a warning that you can choose to ignore. However, if you have
included these elements, please resolve any errors before submitting the
data package.</p>
<ul>
<li>All individual Creators have an <a href="https://orcid.org" class="external-link">ORCiD</a> associated with them (<a href="../reference/test_orcid_exists.html"><code>test_orcid_exists()</code></a>)</li>
<li>All ORCiDs are properly formatted (<a href="../reference/test_orcid_format.html"><code>test_orcid_format()</code></a>)</li>
<li>All ORCiDs resolve to an ORCiD profile (<a href="../reference/test_orcid_resolves.html"><code>test_orcid_resolves()</code></a>)</li>
<li>All ORCiDs resolve to an ORCiD profile that matches the Creator’s
last name (<a href="../reference/test_orcid_match.html"><code>test_orcid_match()</code></a>)</li>
<li>The metadata contains a well formatted additionalInfo (“Notes” on
DataStore) section (<a href="../reference/test_notes.html"><code>test_notes()</code></a>)</li>
<li>The metadata contains a DataStore Project reference in “projects”(<a href="../reference/test_project.html"><code>test_project()</code></a>)</li>
</ul>
</div>
<div class="section level3">
<h3 id="metadata-and-data-congruence">Metadata and Data Congruence<a class="anchor" aria-label="anchor" href="#metadata-and-data-congruence"></a>
</h3>
<p>These functions check to make sure the values and fields in the
metadata file accurately corresponds to the data files supplied. These
test require the entire data package - both the *_metadata.xml file and
all data files (*.csv) must be present.</p>
<ul>
<li>All data files are listed in metadata and all metadata file names
refer to data files (<a href="../reference/test_file_name_match.html"><code>test_file_name_match()</code></a>)</li>
<li>All columns in data match all columns in metadata (<a href="../reference/test_fields_match.html"><code>test_fields_match()</code></a>)</li>
<li>All NAs (missing data) are properly accounted for in metadata (<a href="../reference/test_missing_data.html"><code>test_missing_data()</code></a>)</li>
<li>Columns indicated as numeric in metadata contain only numeric values
and missing value codes in the data (<a href="../reference/test_numeric_fields.html"><code>test_numeric_fields()</code></a>)</li>
<li>Columns indicated as dates in metadata have matching date formats in
the metadata and the data. This checks each cell in each date column
against the format provided in the metadata and so can take some time
for larger data packages (<a href="../reference/test_dates_parse.html"><code>test_dates_parse()</code></a>)</li>
<li>Columns indicated as dates in metadata contain values that fall
within the stated temporal coverage in metadata (<a href="../reference/test_date_range.html"><code>test_date_range()</code></a>)</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-and-metadata-compliance">Data and Metadata Compliance<a class="anchor" aria-label="anchor" href="#data-and-metadata-compliance"></a>
</h3>
<p>These functions check the data and metadata files for compliance.
Please resolve any errors before uploading your data.</p>
<ul>
<li>Data files do not contain any email addresses that constitute
personally identifiable information (PII) (<a href="../reference/test_pii_data.html"><code>test_pii_data_emails()</code></a>
</li>
<li>Metadata do not contain GPS coordinates if the data package is not
public (<a href="../reference/test_public_points.html"><code>test_public_points()</code></a>)</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rob Baker, Sarah E. Wright.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
